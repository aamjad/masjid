(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function r(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(n){if(n.ep)return;n.ep=!0;const a=r(n);fetch(n.href,a)}})();const C=[],I=[{ar:"إِنَّ الصَّلَاةَ تَنْهَىٰ عَنِ الْفَحْشَاءِ وَالْمُنكَرِ",en:"Indeed, prayer prohibits immorality and wrongdoing. (Quran 29:45)"},{ar:"خَيْرُكُمْ أَحْسَنُكُمْ أَخْلَاقًا",en:"The best among you are those who have the best manners and character. (Bukhari)"},{ar:"فَاذْكُرُونِي أَذْكُرْكُمْ",en:"So remember Me; I will remember you. (Quran 2:152)"},{ar:"مَنْ لَا يَشْكُرِ النَّاسَ لَا يَشْكُرِ اللَّهَ",en:"Whoever does not thank people has not thanked Allah. (Tirmidhi)"},{ar:"وَوَجَدَكَ ضَالًّا فَهَدَىٰ",en:"And He found you lost and guided [you]. (Quran 93:7)"},{ar:"لَيْسَ الشَّدِيدُ بِالصُّرَعَةِ، إِنَّمَا الشَّدِيدُ الَّذِي يَمْلِكُ نَفْسَهُ عِندَ الْغَضَبِ",en:"The strong man is not the one who can overpower others. The strong man is the one who controls himself when angry. (Bukhari)"},{ar:"وَلَسَوْفَ يُعْطِيكَ رَبُّكَ فَتَرْضَىٰ",en:"And your Lord is going to give you, and you will be satisfied. (Quran 93:5)"},{ar:"يَسِّرُوا وَلَا تُعَسِّرُوا",en:"Make things easy and do not make them difficult. (Bukhari)"},{ar:"وَمَن يَتَوَكَّلْ عَلَى اللَّهِ فَهُوَ حَسْبُهُ",en:"And whoever puts his trust in Allah, then He will suffice him. (Quran 65:3)"},{ar:"لَا يُؤْمِنُ أَحَدُكُمْ حَتَّى يُحِبَّ لأَخِيهِ مَا يُحِبُّ لِنَفْسِهِ",en:"None of you truly believes until he loves for his brother what he loves for himself. (Bukhari & Muslim)"}],f={mapWebsite:"https://lh3.googleusercontent.com/pw/AP1GczMiSbMYQ1chhnVDpXwImM1H0Rp17RSa8uuGaPLCb0WPxRT8YNa2yA3Jce_Id76WDTb2gVxzjJ0iKmY6hDm8HDT6XApjx3cDdDzVXpRC89cODpoberK3bLCmqasSUTIX3bXt4VzBFvnhZmo-ukukJhYz=w450-h450-s-no-gm?authuser=0",mohidDonation:"https://lh3.googleusercontent.com/pw/AP1GczME-q_Z1uZsf6O03ycHY5UCOXZx45f4XblJAuy9qt1m2f4xdQKFBzJKZKycsEIrpyO-jXhC8WAh1iR-QPLmYjcbBLxL4hxHlRoPWxpHE6ZLH3Y708qJ6yXcY_WiBHmkBJsmL7WkOEhI-nHqAL5R7VWQ=w450-h450-s-no-gm?authuser=0",communityWhatsApp:"https://lh3.googleusercontent.com/pw/AP1GczNzysZmpkevxf8TpH2-afM-4ph5OVNunXyKdf5lXyingNMnYGhQpBulHtUE20dq5xvONx0SOibIpvxVQ4LQcZcYc403qfqTpRx-mJSKShaFvJgJTONUrJF3p9dlNpzIjR4DX2moKvPOreG8pg6iy613=w450-h450-s-no-gm?authuser=0"},k={mapWebsite:"MAP Website",mohidDonation:"Mohid Donation",communityWhatsApp:"Community WhatsApp"},y={owner:"itsecretary-map",repo:"chromecast_stream",folder:"images/slideshow",enabled:!0};function M(){const t="./CCA_5344-HDR.jpg";console.log("🖼️  Loading background image:",t),console.log("📍 Current page URL:",window.location.href),console.log("📁 Current page pathname:",window.location.pathname);const e=new Image;e.onload=()=>{console.log("✅ Background image loaded successfully:",t),console.log("📏 Image dimensions:",e.width,"x",e.height),console.log("💾 Image size:",(e.naturalWidth*e.naturalHeight*4/1024/1024).toFixed(2),"MB (estimated)"),document.body.style.backgroundImage=`url('${t}')`,document.body.style.backgroundSize="cover",document.body.style.backgroundPosition="center center",document.body.style.backgroundAttachment="fixed",console.log("🎨 Background image applied to body element")},e.onerror=()=>{console.error("❌ Failed to load background image:",t),console.error("🔍 Check if the file exists at:",t);const r=["CCA_5344-HDR.jpg","/CCA_5344-HDR.jpg","../CCA_5344-HDR.jpg"];console.log("🔄 Trying alternative paths:",r);let o=0;const n=()=>{if(o<r.length){const a=r[o];console.log(`🔄 Attempting alternative path ${o+1}/${r.length}:`,a),o++,e.src=a}else console.error("❌ All alternative paths failed. Background image could not be loaded."),document.body.style.backgroundColor="#2c3e50",document.body.style.backgroundImage="none",console.log("🎨 Applied fallback background color")};e.onerror=n,e.onload=()=>{console.log("✅ Background image loaded with alternative path:",e.src),document.body.style.backgroundImage=`url('${e.src}')`,document.body.style.backgroundSize="cover",document.body.style.backgroundPosition="center center",document.body.style.backgroundAttachment="fixed",console.log("🎨 Background image applied to body element")},n()},e.src=t}let s=[];const b="github_images_cache",A=1440*60*1e3;async function E(){try{const t=localStorage.getItem(b);if(t){const r=JSON.parse(t),o=Date.now();if(o-r.timestamp<A)return console.log("📦 Using cached GitHub images (age:",Math.round((o-r.timestamp)/1e3/60),"minutes)"),r.images;console.log("⏰ Cache expired, fetching fresh images from GitHub")}const e=await D();if(e.length>0){const r={images:e,timestamp:Date.now()};localStorage.setItem(b,JSON.stringify(r)),console.log("💾 Cached fresh GitHub images")}return e}catch(t){console.error("❌ Error in cache management:",t);const e=localStorage.getItem(b);if(e){const r=JSON.parse(e);return console.log("🔄 Using expired cache as fallback"),r.images}return[]}}async function D(){try{const t=`https://api.github.com/repos/${y.owner}/${y.repo}/contents/${y.folder}`;console.log("Fetching images from GitHub:",t);const e=await fetch(t);if(!e.ok)throw new Error(`GitHub API error: ${e.status} ${e.statusText}`);const r=await e.json();console.log("GitHub API response:",r);const o=r.filter(a=>{const i=a.name.toLowerCase().split(".").pop();return["jpg","jpeg","png","gif","webp"].includes(i)});console.log(`Found ${o.length} image files:`,o);const n=o.map(a=>({id:a.sha,name:a.name,url:a.download_url}));return console.log("GitHub images processed:",n),n}catch(t){return console.error("Error fetching GitHub images:",t),[]}}function L(){if(window.location.hostname==="localhost"||window.location.hostname.includes("github.io")||window.innerWidth>=1920||window.innerHeight>=1080){console.log("📺 Chromecast Receiver Mode Detected"),console.log("  - Screen size:",window.innerWidth,"x",window.innerHeight),console.log("  - Hostname:",window.location.hostname),P();const e=document.querySelector(".chromecast-controls");e&&(e.style.display="none",console.log("🎯 Hidden Chromecast sender controls for receiver mode"))}else console.log("💻 Sender Mode Detected (showing cast controls)")}function P(){const t=document.body;t.style.fontSize=window.innerWidth>=3840?"32px":"24px";const e=document.querySelector(".main-layout");e&&(e.style.maxWidth=window.innerWidth>=3840?"2400px":"1800px",e.style.margin="0 auto",e.style.padding=window.innerWidth>=3840?"60px":"40px");const r=document.querySelector(".slideshow img");r&&(r.style.maxHeight="70vh",r.style.borderRadius="16px",r.style.boxShadow="0 8px 32px rgba(0, 0, 0, 0.6)"),console.log("🎨 TV display optimizations applied")}let l=0;const c=document.getElementById("slideshow-img");function h(t){if(s.length===0){console.log("No images available to show");return}console.log(`Showing image ${t+1} of ${s.length}:`,s[t]),c.style.opacity=0;let e=document.getElementById("slideshow-error");e&&e.remove(),setTimeout(()=>{const r=s[t];console.log("Setting image src to:",r),c.src=r,c.onload=()=>{console.log("Image loaded successfully:",r),c.style.opacity=1},c.onerror=()=>{if(console.error("Image failed to load:",r),c.style.opacity=.2,!document.getElementById("slideshow-error")){const o=document.createElement("div");o.id="slideshow-error",o.style.color="red",o.style.textAlign="center",o.style.marginTop="10px",o.textContent="Image failed to load. Check the image URL or try another image.",c.parentNode.appendChild(o)}}},300)}function S(){s.length!==0&&(l=(l+1)%s.length,h(l))}async function $(){try{console.log("Initializing slideshow with GitHub images...");const t=await E();t.length>0?(s=t.map(e=>e.url),console.log(`Updated slideshow with ${s.length} images from GitHub`),s.length>0&&(l=0,h(l))):(console.log("No images found in GitHub repository"),s=C,s.length>0&&(l=0,h(l)))}catch(t){console.error("Error initializing slideshow:",t),s=C,s.length>0&&(l=0,h(l))}}setInterval(S,1e4);const x=document.getElementById("announcements-list");let u=0;function v(t){x.innerHTML="";const e=document.createElement("div"),r=I[t].ar.replace(/[.\u06D4]+$/,""),o=I[t].en.replace(/[.]+(?=\s*\()/,"");e.innerHTML=`<div style="font-size:1.5rem;font-weight:bold;direction:rtl;text-align:center;">${r}</div><div style="margin-top:6px;font-size:1.1rem;text-align:center;">${o}</div>`,x.appendChild(e)}v(u);setInterval(()=>{u=(u+1)%I.length,v(u)},2e4);const z="15044",B="US",g=document.getElementById("prayer-times-list");fetch(`https://api.aladhan.com/v1/timingsByAddress?address=${z},${B}`).then(t=>t.json()).then(t=>{const e=t.data.timings;["Fajr","Dhuhr","Asr","Maghrib","Isha"].forEach(n=>{let a=e[n];if(a){let[m,H]=a.split(":"),d=parseInt(m,10),p="AM";d===0?d=12:d===12?p="PM":d>12&&(d-=12,p="PM"),a=`${d}:${H} ${p}`}const i=document.createElement("li");i.textContent=`${n}: ${a}`,g.appendChild(i)});const o=document.createElement("li");o.textContent="Jummah: 1:15 PM",g.appendChild(o)}).catch(()=>{[{name:"Fajr",time:"05:12 AM"},{name:"Dhuhr",time:"01:23 PM"},{name:"Asr",time:"05:07 PM"},{name:"Maghrib",time:"08:34 PM"},{name:"Isha",time:"10:02 PM"}].forEach(r=>{let[o,n,a]=r.time.match(/(\d+):(\d+)\s*(AM|PM)/i)||[],i=r.time;o&&n&&a&&(i=`${parseInt(o,10)}:${n} ${a.toUpperCase()}`);const m=document.createElement("li");m.textContent=`${r.name}: ${i}`,g.appendChild(m)});const e=document.createElement("li");e.textContent="Jummah: 1:15 PM",g.appendChild(e)});const w=document.querySelector(".qr-list");w&&f&&typeof f=="object"&&(w.innerHTML="",Object.entries(f).forEach(([t,e],r)=>{const o=document.createElement("div");o.style.display="flex",o.style.flexDirection="column",o.style.alignItems="center",o.style.marginBottom="18px";const n=document.createElement("div");n.textContent=k[t]||t.replace(/([A-Z])/g," $1").replace(/^./,i=>i.toUpperCase()),n.style.color="#ffd600",n.style.fontSize="1.1rem",n.style.marginBottom="8px",n.style.textAlign="center",n.style.wordBreak="break-word";const a=document.createElement("img");a.className="qr-img",a.src=e,a.alt=n.textContent,o.appendChild(n),o.appendChild(a),w.appendChild(o)}));console.log("🚀 Initializing Chromecast Receiver Demo...");M();$();L();console.log("🔧 Cache Management Commands Available:");console.log("  - getCacheInfo() - Check cache status");console.log("  - clearImageCache() - Clear image cache");console.log("  - forceRefreshImages() - Force refresh from GitHub");console.log("  - CACHE_DURATION:",Math.round(A/1e3/60),"minutes");console.log("✅ Initialization complete!");
