(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();function C(t){return typeof window<"u"&&(window.location.hostname==="itsecretary-map.github.io"||window.location.pathname.includes("/chromecast_stream/"))?`/chromecast_stream/images/slideshow/${t}`:`./images/slideshow/${t}`}const H=[{ar:"ÿ•ŸêŸÜŸéŸë ÿßŸÑÿµŸéŸëŸÑŸéÿßÿ©Ÿé ÿ™ŸéŸÜŸíŸáŸéŸâŸ∞ ÿπŸéŸÜŸê ÿßŸÑŸíŸÅŸéÿ≠Ÿíÿ¥Ÿéÿßÿ°Ÿê ŸàŸéÿßŸÑŸíŸÖŸèŸÜŸÉŸéÿ±Ÿê",en:"Indeed, prayer prohibits immorality and wrongdoing. (Quran 29:45)"},{ar:"ÿÆŸéŸäŸíÿ±ŸèŸÉŸèŸÖŸí ÿ£Ÿéÿ≠Ÿíÿ≥ŸéŸÜŸèŸÉŸèŸÖŸí ÿ£ŸéÿÆŸíŸÑŸéÿßŸÇŸãÿß",en:"The best among you are those who have the best manners and character. (Bukhari)"},{ar:"ŸÅŸéÿßÿ∞ŸíŸÉŸèÿ±ŸèŸàŸÜŸêŸä ÿ£Ÿéÿ∞ŸíŸÉŸèÿ±ŸíŸÉŸèŸÖŸí",en:"So remember Me; I will remember you. (Quran 2:152)"},{ar:"ŸÖŸéŸÜŸí ŸÑŸéÿß ŸäŸéÿ¥ŸíŸÉŸèÿ±Ÿê ÿßŸÑŸÜŸéŸëÿßÿ≥Ÿé ŸÑŸéÿß ŸäŸéÿ¥ŸíŸÉŸèÿ±Ÿê ÿßŸÑŸÑŸéŸëŸáŸé",en:"Whoever does not thank people has not thanked Allah. (Tirmidhi)"},{ar:"ŸàŸéŸàŸéÿ¨ŸéÿØŸéŸÉŸé ÿ∂ŸéÿßŸÑŸãŸëÿß ŸÅŸéŸáŸéÿØŸéŸâŸ∞",en:"And He found you lost and guided [you]. (Quran 93:7)"},{ar:"ŸÑŸéŸäŸíÿ≥Ÿé ÿßŸÑÿ¥ŸéŸëÿØŸêŸäÿØŸè ÿ®ŸêÿßŸÑÿµŸèŸëÿ±ŸéÿπŸéÿ©Ÿêÿå ÿ•ŸêŸÜŸéŸëŸÖŸéÿß ÿßŸÑÿ¥ŸéŸëÿØŸêŸäÿØŸè ÿßŸÑŸéŸëÿ∞ŸêŸä ŸäŸéŸÖŸíŸÑŸêŸÉŸè ŸÜŸéŸÅŸíÿ≥ŸéŸáŸè ÿπŸêŸÜÿØŸé ÿßŸÑŸíÿ∫Ÿéÿ∂Ÿéÿ®Ÿê",en:"The strong man is not the one who can overpower others. The strong man is the one who controls himself when angry. (Bukhari)"},{ar:"ŸàŸéŸÑŸéÿ≥ŸéŸàŸíŸÅŸé ŸäŸèÿπŸíÿ∑ŸêŸäŸÉŸé ÿ±Ÿéÿ®ŸèŸëŸÉŸé ŸÅŸéÿ™Ÿéÿ±Ÿíÿ∂ŸéŸâŸ∞",en:"And your Lord is going to give you, and you will be satisfied. (Quran 93:5)"},{ar:"ŸäŸéÿ≥ŸêŸëÿ±ŸèŸàÿß ŸàŸéŸÑŸéÿß ÿ™ŸèÿπŸéÿ≥ŸêŸëÿ±ŸèŸàÿß",en:"Make things easy and do not make them difficult. (Bukhari)"},{ar:"ŸàŸéŸÖŸéŸÜ ŸäŸéÿ™ŸéŸàŸéŸÉŸéŸëŸÑŸí ÿπŸéŸÑŸéŸâ ÿßŸÑŸÑŸéŸëŸáŸê ŸÅŸéŸáŸèŸàŸé ÿ≠Ÿéÿ≥Ÿíÿ®ŸèŸáŸè",en:"And whoever puts his trust in Allah, then He will suffice him. (Quran 65:3)"},{ar:"ŸÑŸéÿß ŸäŸèÿ§ŸíŸÖŸêŸÜŸè ÿ£Ÿéÿ≠ŸéÿØŸèŸÉŸèŸÖŸí ÿ≠Ÿéÿ™ŸéŸëŸâ ŸäŸèÿ≠Ÿêÿ®ŸéŸë ŸÑÿ£ŸéÿÆŸêŸäŸáŸê ŸÖŸéÿß ŸäŸèÿ≠Ÿêÿ®ŸèŸë ŸÑŸêŸÜŸéŸÅŸíÿ≥ŸêŸáŸê",en:"None of you truly believes until he loves for his brother what he loves for himself. (Bukhari & Muslim)"}];function $(){return typeof window<"u"&&(window.location.hostname==="itsecretary-map.github.io"||window.location.pathname.includes("/chromecast_stream/"))?{mapWebsite:"/chromecast_stream/images/qr-codes/mapitt.png",communityWhatsApp:"/chromecast_stream/images/qr-codes/whatsapp_group.png"}:{mapWebsite:"./images/qr-codes/mapitt.png",communityWhatsApp:"./images/qr-codes/whatsapp_group.png"}}const M={mapWebsite:"MAP Website",communityWhatsApp:"WhatsApp"},w={owner:"itsecretary-map",repo:"chromecast_stream",folder:"images/slideshow",enabled:!0};function I(){const t=window.location.hostname==="itsecretary-map.github.io"||window.location.pathname.includes("/chromecast_stream/"),e=["./CCA_5344-HDR.jpg","CCA_5344-HDR.jpg","/CCA_5344-HDR.jpg","../CCA_5344-HDR.jpg"];t&&(e.unshift("/chromecast_stream/CCA_5344-HDR.jpg"),e.unshift("./chromecast_stream/CCA_5344-HDR.jpg")),console.log("üñºÔ∏è  Attempting to load background image from multiple paths:",e),console.log("üìç Current page URL:",window.location.href),console.log("üìÅ Current page pathname:",window.location.pathname);let n=0;const a=new Image;a.onload=()=>{console.log("‚úÖ Background image loaded successfully:",a.src),console.log("üìè Image dimensions:",a.naturalWidth,"x",a.naturalHeight),console.log("üíæ Image size:",(a.naturalWidth*a.naturalHeight*4/1024/1024).toFixed(2),"MB (estimated)"),document.body.style.setProperty("background-image",`url('${a.src}')`,"important"),document.body.style.setProperty("background-size","cover","important"),document.body.style.setProperty("background-position","center center","important"),document.body.style.setProperty("background-attachment","fixed","important"),document.body.style.setProperty("background-repeat","no-repeat","important"),console.log("üé® Background image applied to body element with !important")},a.onerror=()=>{if(console.error(`‚ùå Failed to load background image from path ${n+1}/${e.length}:`,e[n]),n++,n<e.length){const o=e[n];console.log(`üîÑ Trying next path (${n+1}/${e.length}):`,o),a.src=o}else console.error("‚ùå All paths failed. Background image could not be loaded."),console.log("üé® Keeping CSS gradient background as fallback")},console.log(`üöÄ Starting with path: ${e[0]}`),a.src=e[0],fetch(e[0]).then(o=>{o.ok?console.log("‚úÖ Fetch API confirms image is accessible:",e[0]):console.error("‚ùå Fetch API failed:",o.status,o.statusText)}).catch(o=>{console.error("‚ùå Fetch API error:",o)})}let r=[];const u="github_images_cache",A=1440*60*1e3;async function k(){try{const t=localStorage.getItem(u);if(t){const n=JSON.parse(t),a=Date.now();if(a-n.timestamp<A)return console.log("üì¶ Using cached GitHub images (age:",Math.round((a-n.timestamp)/1e3/60),"minutes)"),n.images;console.log("‚è∞ Cache expired, fetching fresh images from GitHub")}const e=await S();if(e.length>0){const n={images:e,timestamp:Date.now()};localStorage.setItem(u,JSON.stringify(n)),console.log("üíæ Cached fresh GitHub images")}return e}catch(t){console.error("‚ùå Error in cache management:",t);const e=localStorage.getItem(u);if(e){const n=JSON.parse(e);return console.log("üîÑ Using expired cache as fallback"),n.images}return[]}}async function S(){try{const t=`https://api.github.com/repos/${w.owner}/${w.repo}/contents/${w.folder}`;console.log("Fetching images from GitHub:",t);const e=await fetch(t);if(!e.ok){if(e.status===404)return console.warn("‚ö†Ô∏è GitHub folder not found:",t),console.log("This is expected if the folder is empty or doesn't exist"),[];throw new Error(`GitHub API error: ${e.status} ${e.statusText}`)}const n=await e.json();console.log("GitHub API response:",n),console.log("üìÅ All files returned from GitHub:",n.map(i=>i.name));const a=n.filter(i=>{const s=i.name.toLowerCase().split(".").pop(),l=["jpg","jpeg","png","gif","webp"].includes(s),g=!i.name.includes("CCA_5344-HDR");return console.log(`üîç File: ${i.name}, isImage: ${l}, isNotBackground: ${g}`),l&&g});console.log(`‚úÖ Found ${a.length} valid slideshow image files:`,a);const o=a.map(i=>({id:i.sha,name:i.name,url:i.download_url}));return console.log("GitHub images processed:",o),o}catch(t){return console.error("Error fetching GitHub images:",t),console.log("Falling back to default slideshow images"),[]}}function _(){localStorage.removeItem(u),console.log("üóëÔ∏è Image cache cleared")}function D(){if(window.location.hostname==="localhost"||window.location.hostname.includes("github.io")||window.innerWidth>=1920||window.innerHeight>=1080){console.log("üì∫ Chromecast Receiver Mode Detected"),console.log("  - Screen size:",window.innerWidth,"x",window.innerHeight),console.log("  - Hostname:",window.location.hostname),L();const e=document.querySelector(".chromecast-controls");e&&(e.style.display="none",console.log("üéØ Hidden Chromecast sender controls for receiver mode"))}else console.log("üíª Sender Mode Detected (showing cast controls)")}function L(){const t=document.body;t.style.fontSize=window.innerWidth>=3840?"32px":"24px";const e=document.querySelector(".main-layout");e&&(e.style.maxWidth=window.innerWidth>=3840?"2400px":"1800px",e.style.margin="0 auto",e.style.padding=window.innerWidth>=3840?"60px":"40px");const n=document.querySelector(".slideshow img");n&&(n.style.maxHeight="70vh",n.style.borderRadius="16px",n.style.boxShadow="0 8px 32px rgba(0, 0, 0, 0.6)"),console.log("üé® TV display optimizations applied")}function P(){const t=window.innerWidth/window.innerHeight;window.innerWidth>=1920&&(console.log(`TV detected: ${window.innerWidth}x${window.innerHeight}, aspect ratio: ${t.toFixed(2)}`),t<=16/9?(document.documentElement.style.setProperty("--min-height","clamp(25vh, 35vh, 40vh)"),document.documentElement.style.setProperty("--header-height","clamp(8vh, 12vh, 15vh)"),document.documentElement.style.setProperty("--announcements-height","clamp(8vh, 12vh, 15vh)"),document.documentElement.style.setProperty("--column-gap","clamp(20px, 2.5vw, 35px)"),document.documentElement.style.setProperty("--row-gap","clamp(8px, 1vw, 15px)"),console.log("Applied 16:9 TV optimization")):(document.documentElement.style.setProperty("--min-height","clamp(20vh, 30vh, 35vh)"),document.documentElement.style.setProperty("--header-height","clamp(6vh, 10vh, 12vh)"),document.documentElement.style.setProperty("--announcements-height","clamp(6vh, 10vh, 12vh)"),document.documentElement.style.setProperty("--column-gap","clamp(25px, 3vw, 45px)"),document.documentElement.style.setProperty("--row-gap","clamp(6px, 0.8vw, 12px)"),console.log("Applied ultra-wide TV optimization")))}window.addEventListener("load",P);window.addEventListener("resize",P);let c=0;const m=document.getElementById("slideshow-img");function p(t){if(r.length===0){console.log("No images available to show");return}console.log(`Showing image ${t+1} of ${r.length}:`,r[t]),m.style.opacity=0;let e=document.getElementById("slideshow-error");e&&e.remove(),setTimeout(()=>{const n=r[t];console.log("Setting image src to:",n),m.src=n,m.onload=()=>{console.log("Image loaded successfully:",n),m.style.opacity=1},m.onerror=()=>{if(console.error("Image failed to load:",n),m.style.opacity=.2,!document.getElementById("slideshow-error")){const a=document.createElement("div");a.id="slideshow-error",a.style.color="red",a.style.textAlign="center",a.style.marginTop="10px",a.textContent="Image failed to load. Check the image URL or try another image.",m.parentNode.appendChild(a)}}},300)}function T(){r.length!==0&&(c=(c+1)%r.length,p(c))}async function B(){try{console.log("Initializing slideshow with GitHub images..."),_();const t=await k();t.length>0?(r=t.map(e=>e.url),console.log(`Updated slideshow with ${r.length} images from GitHub`),r.length>0&&(c=0,p(c))):(console.log("No images found in GitHub repository"),r=v(),r.length>0&&(c=0,p(c)))}catch(t){console.error("Error initializing slideshow:",t),r=v(),r.length>0&&(c=0,p(c))}}setInterval(T,1e4);function v(){return[C("imam_schedule.jpg"),C("sundayschool.jpg")]}const x=document.getElementById("announcements-list");let f=0;function E(t){x.innerHTML="";const e=document.createElement("div"),n=H[t].en.replace(/[.]+(?=\s*\()/,"");e.innerHTML=`<div style="font-size:1rem;text-align:center;color:white;line-height:1.4;padding:15px;background:rgba(255,255,255,0.1);border-radius:8px;border-left:4px solid #2196F3;">${n}</div>`,x.appendChild(e)}E(f);setInterval(()=>{f=(f+1)%H.length,E(f)},2e4);const F="15044",G="US",h=document.getElementById("prayer-times-list");fetch(`https://api.aladhan.com/v1/timingsByAddress?address=${F},${G}`).then(t=>t.json()).then(t=>{const e=t.data.timings;["Fajr","Dhuhr","Asr","Maghrib","Isha"].forEach(o=>{let i=e[o];if(i){let[l,g]=i.split(":"),d=parseInt(l,10),y="AM";d===0?d=12:d===12?y="PM":d>12&&(d-=12,y="PM"),i=`${d}:${g} ${y}`}const s=document.createElement("li");s.textContent=`${o}: ${i}`,h.appendChild(s)});const a=document.createElement("li");a.textContent="Jummah: 1:15 PM",h.appendChild(a)}).catch(()=>{[{name:"Fajr",time:"05:12 AM"},{name:"Dhuhr",time:"01:23 PM"},{name:"Asr",time:"05:07 PM"},{name:"Maghrib",time:"08:34 PM"},{name:"Isha",time:"10:02 PM"}].forEach(n=>{let[a,o,i]=n.time.match(/(\d+):(\d+)\s*(AM|PM)/i)||[],s=n.time;a&&o&&i&&(s=`${parseInt(a,10)}:${o} ${i.toUpperCase()}`);const l=document.createElement("li");l.textContent=`${n.name}: ${s}`,h.appendChild(l)});const e=document.createElement("li");e.textContent="Jummah: 1:15 PM",h.appendChild(e)});const b=document.querySelector(".qr-list");if(b){const t=$();t&&typeof t=="object"&&(b.innerHTML="",Object.entries(t).forEach(([e,n],a)=>{const o=document.createElement("div");o.style.display="flex",o.style.flexDirection="column",o.style.alignItems="center",o.style.marginBottom="18px";const i=document.createElement("div");i.textContent=M[e]||e.replace(/([A-Z])/g," $1").replace(/^./,l=>l.toUpperCase()),i.style.color="#ffd600",i.style.fontSize="1.1rem",i.style.marginBottom="8px",i.style.textAlign="center",i.style.wordBreak="break-word";const s=document.createElement("img");s.className="qr-img",s.src=n,s.alt=i.textContent,o.appendChild(i),o.appendChild(s),b.appendChild(o)}))}console.log("üöÄ Initializing Chromecast Receiver Demo...");document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{console.log("üìÑ DOM fully loaded, setting background image..."),I()}):(console.log("üìÑ DOM already loaded, setting background image..."),I());B();D();console.log("üîß Cache Management Commands Available:");console.log("  - getCacheInfo() - Check cache status");console.log("  - clearImageCache() - Clear image cache");console.log("  - forceRefreshImages() - Force refresh from GitHub");console.log("  - CACHE_DURATION:",Math.round(A/1e3/60),"minutes");console.log("‚úÖ Initialization complete!");
